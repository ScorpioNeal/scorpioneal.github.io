<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="AndroidOptimization,AndroidTranslation,">










<meta name="description" content="dumpsys工具翻译, 原文见dympsys dumpsys is a tool that runs on Android devices and provides information about system services. You can call dumpsys from the command line using the Androi Debug Bridge(ADB) to">
<meta name="keywords" content="AndroidOptimization,AndroidTranslation">
<meta property="og:type" content="article">
<meta property="og:title" content="Translation-Dumpsys工具">
<meta property="og:url" content="http://blog.scions.cn/posts/122f7e6c/index.html">
<meta property="og:site_name" content="ScorpioNeal&#39;s Blog">
<meta property="og:description" content="dumpsys工具翻译, 原文见dympsys dumpsys is a tool that runs on Android devices and provides information about system services. You can call dumpsys from the command line using the Androi Debug Bridge(ADB) to">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-12-09T13:01:07.182Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Translation-Dumpsys工具">
<meta name="twitter:description" content="dumpsys工具翻译, 原文见dympsys dumpsys is a tool that runs on Android devices and provides information about system services. You can call dumpsys from the command line using the Androi Debug Bridge(ADB) to">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://blog.scions.cn/posts/122f7e6c/">





  <title>Translation-Dumpsys工具 | ScorpioNeal's Blog</title>
  








  <link rel="stylesheet" href="/live2d/css/live2d.css">
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">
<div class="bg_content">
<canvas id="canvas"></canvas>
</div>
  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ScorpioNeal's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-todo">
          <a href="/todo/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            todo
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.scions.cn/posts/122f7e6c/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ScorpioNeal">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ScorpioNeal's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Translation-Dumpsys工具</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-06-06T08:59:01+08:00">
                2019-06-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Translation/" itemprop="url" rel="index">
                    <span itemprop="name">Translation</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/posts/122f7e6c/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/posts/122f7e6c/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="dumpsys工具"><a href="#dumpsys工具" class="headerlink" title="dumpsys工具"></a>dumpsys工具</h1><p>翻译, 原文见<a href="https://developer.android.com/studio/command-line/dumpsys" target="_blank" rel="noopener">dympsys</a></p>
<p><code>dumpsys</code> is a tool that runs on Android devices and provides information about system services. You can call <code>dumpsys</code> from the command line using the <a href="https://developer.android.com/studio/command-line/adb.html" target="_blank" rel="noopener">Androi Debug Bridge(ADB)</a> to get diagonostic output for all system services running on a connected device. This output is typically more verbose than you may want, so use the command line options described below to get output for only the system services you’re interested in. This page also describes how to use <code>dumpsys</code> to accomplish common tasks, such as inspecting input, RAM, battery, or network diagnostics.</p>
<h2 id="Syntax"><a href="#Syntax" class="headerlink" title="Syntax"></a>Syntax</h2><p>The general syntax for using <code>dumpsys</code> is as follows:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys [-t timeout] [--help | -l | --skip services | service [arguments] | -c | -h]</span><br></pre></td></tr></table></figure>

<p>To get a diagnostic output for all system services for your connected device, simply run <code>adb shell dumpsys</code>. However, this outputs far more information than you would typically want. For more manageable output, specify the service you want to examine by including it in the command. For example, the command below provides system data for input components, such as touchscreens or built-in keyboards:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys input</span><br></pre></td></tr></table></figure>

<p>For a complete list of system services that you can use with <code>dympsys</code>, use the following command:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys -l</span><br></pre></td></tr></table></figure>

<h3 id="Command-line-options"><a href="#Command-line-options" class="headerlink" title="Command line options"></a>Command line options</h3><p>The following table lists the available options when using <code>dumpsys</code>.</p>
<table>
<thead>
<tr>
<th align="center">Option</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="center">-t timeout</td>
<td align="center">Sepecifies the timeout period in seconds. When not specified, the default value is 10 seconds.</td>
</tr>
<tr>
<td align="center">- -help</td>
<td align="center">Prints out help text for the dumpsys tool</td>
</tr>
<tr>
<td align="center">-l</td>
<td align="center">Outputs a complete list of system services that you can use with dumpsys.</td>
</tr>
<tr>
<td align="center">- -skip <font color="red">services</font></td>
<td align="center">Specifies the <font color="red">services</font> that you do not want to include in the output.</td>
</tr>
<tr>
<td align="center"><font color="red">service</font> [<font color="red">arguments</font>]</td>
<td align="center">Specifies the <font color="red">service</font> that you want to output. Some services may allow you to pass optional <font color="red">arguments</font>. You can learn about these optional arguments by passing the -h option with the service, as shown below: adb shell dumpsys procstats -h</td>
</tr>
<tr>
<td align="center">-c</td>
<td align="center">When specifying certain services, append this option to output data in a machine-friendly format.</td>
</tr>
<tr>
<td align="center">-h</td>
<td align="center">For certain services, append this option to see help text and additional options for that service.</td>
</tr>
</tbody></table>
<h2 id="Inspect-input-diagnostics"><a href="#Inspect-input-diagnostics" class="headerlink" title="Inspect input diagnostics"></a>Inspect input diagnostics</h2><p>Sepcifying the <code>input</code> service, as shown below, dumps the state of the system’s input devices, such as keyboards and touchscreens, and the processing of input events.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys input</span><br></pre></td></tr></table></figure>

<p>The output varies depending on the version of Android running on the connected device. The sections below describe the type of infomation you typically see.</p>
<h3 id="Event-hub-state"><a href="#Event-hub-state" class="headerlink" title="Event hub state"></a>Event hub state</h3><p>The following is a sample of what you might see when inspecting the Event Hub State of the input diagnostics:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">INPUT MANAGER (dumpsys input)</span><br><span class="line"></span><br><span class="line">Event Hub State:</span><br><span class="line">  BuiltInKeyboardId: -2</span><br><span class="line">  Devices:</span><br><span class="line">    -1: Virtual</span><br><span class="line">      Classes: 0x40000023</span><br><span class="line">      Path: </span><br><span class="line">      Descriptor: a718a782d34bc767f4689c232d64d527998ea7fd</span><br><span class="line">      Location:</span><br><span class="line">      ControllerNumber: 0</span><br><span class="line">      UniqueId: </span><br><span class="line">      Identifier: bus=0x0000, vendor=0x0000, product=0x0000, version=0x0000</span><br><span class="line">      KeyLayoutFile: /system/usr/keylayout/Generic.kl</span><br><span class="line">      KeyCharacterMapFile: /system/usr/keychars/Virtual.kcm</span><br><span class="line">      ConfigurationFile:</span><br><span class="line">      HaveKeyboardLayoutOverlay: false</span><br><span class="line">    1: msm8974-taiko-mtp-snd-card Headset Jack</span><br><span class="line">      Classes: 0x00000080</span><br><span class="line">      Path: /dev/input/event5</span><br><span class="line">      Descriptor: c8e3782483b4837ead6602e20483c46ff801112c</span><br><span class="line">      Location: ALSA</span><br><span class="line">      ControllerNumber: 0</span><br><span class="line">      UniqueId:</span><br><span class="line">      Identifier: bus=0x0000, vendor=0x0000, product=0x0000, version=0x0000</span><br><span class="line">      KeyLayoutFile:</span><br><span class="line">      KeyCharacterMapFile:</span><br><span class="line">      ConfigurationFile:</span><br><span class="line">      HaveKeyboardLayoutOverlay: false</span><br><span class="line">    2: msm8974-taiko-mtp-snd-card Button Jack</span><br><span class="line">      Classes: 0x00000001</span><br><span class="line">      Path: /dev/input/event4</span><br><span class="line">      Descriptor: 96fe62b244c555351ec576b282232e787fb42bab</span><br><span class="line">      Location: ALSA</span><br><span class="line">      ControllerNumber: 0</span><br><span class="line">      UniqueId:</span><br><span class="line">      Identifier: bus=0x0000, vendor=0x0000, product=0x0000, version=0x0000</span><br><span class="line">      KeyLayoutFile: /system/usr/keylayout/msm8974-taiko-mtp-snd-card_Button_Jack.kl</span><br><span class="line">      KeyCharacterMapFile: /system/usr/keychars/msm8974-taiko-mtp-snd-card_Button_Jack.kcm</span><br><span class="line">      ConfigurationFile:</span><br><span class="line">      HaveKeyboardLayoutOverlay: false</span><br><span class="line">    3: hs_detect</span><br><span class="line">      Classes: 0x00000081</span><br><span class="line">      Path: /dev/input/event3</span><br><span class="line">      Descriptor: 485d69228e24f5e46da1598745890b214130dbc4</span><br><span class="line">      Location:</span><br><span class="line">      ControllerNumber: 0</span><br><span class="line">      UniqueId:</span><br><span class="line">      Identifier: bus=0x0000, vendor=0x0001, product=0x0001, version=0x0001</span><br><span class="line">      KeyLayoutFile: /system/usr/keylayout/hs_detect.kl</span><br><span class="line">      KeyCharacterMapFile: /system/usr/keychars/hs_detect.kcm</span><br><span class="line">      ConfigurationFile:</span><br><span class="line">      HaveKeyboardLayoutOverlay: false</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="Input-reader-state"><a href="#Input-reader-state" class="headerlink" title="Input reader state"></a>Input reader state</h3><p>The <code>InputReader</code> is responsible for decoding input events from the kernel. Its state dump shows information about how each input device is configured and recent state changes that have occured, such as key presses or touches on the touch screen.<br>The following sample shows the output for a touch screen. Note the information about the resolution of the device and the calibration parameters that were used.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">Input Reader State</span><br><span class="line">...</span><br><span class="line">  Device 6: Melfas MMSxxx Touchscreen</span><br><span class="line">      IsExternal: false</span><br><span class="line">      Sources: 0x00001002</span><br><span class="line">      KeyboardType: 0</span><br><span class="line">      Motion Ranges:</span><br><span class="line">        X: source=0x00001002, min=0.000, max=719.001, flat=0.000, fuzz=0.999</span><br><span class="line">        Y: source=0x00001002, min=0.000, max=1279.001, flat=0.000, fuzz=0.999</span><br><span class="line">        PRESSURE: source=0x00001002, min=0.000, max=1.000, flat=0.000, fuzz=0.000</span><br><span class="line">        SIZE: source=0x00001002, min=0.000, max=1.000, flat=0.000, fuzz=0.000</span><br><span class="line">        TOUCH_MAJOR: source=0x00001002, min=0.000, max=1468.605, flat=0.000, fuzz=0.000</span><br><span class="line">        TOUCH_MINOR: source=0x00001002, min=0.000, max=1468.605, flat=0.000, fuzz=0.000</span><br><span class="line">        TOOL_MAJOR: source=0x00001002, min=0.000, max=1468.605, flat=0.000, fuzz=0.000</span><br><span class="line">        TOOL_MINOR: source=0x00001002, min=0.000, max=1468.605, flat=0.000, fuzz=0.000</span><br><span class="line">      Touch Input Mapper:</span><br><span class="line">        Parameters:</span><br><span class="line">          GestureMode: spots</span><br><span class="line">          DeviceType: touchScreen</span><br><span class="line">          AssociatedDisplay: id=0, isExternal=false</span><br><span class="line">          OrientationAware: true</span><br><span class="line">        Raw Touch Axes:</span><br><span class="line">          X: min=0, max=720, flat=0, fuzz=0, resolution=0</span><br><span class="line">          Y: min=0, max=1280, flat=0, fuzz=0, resolution=0</span><br><span class="line">          Pressure: min=0, max=255, flat=0, fuzz=0, resolution=0</span><br><span class="line">          TouchMajor: min=0, max=30, flat=0, fuzz=0, resolution=0</span><br><span class="line">          TouchMinor: unknown range</span><br><span class="line">          ToolMajor: unknown range</span><br><span class="line">          ToolMinor: unknown range</span><br><span class="line">          Orientation: unknown range</span><br><span class="line">          Distance: unknown range</span><br><span class="line">          TiltX: unknown range</span><br><span class="line">          TiltY: unknown range</span><br><span class="line">          TrackingId: min=0, max=65535, flat=0, fuzz=0, resolution=0</span><br><span class="line">          Slot: min=0, max=9, flat=0, fuzz=0, resolution=0</span><br><span class="line">        Calibration:</span><br><span class="line">          touch.size.calibration: diameter</span><br><span class="line">          touch.size.scale: 10.000</span><br><span class="line">          touch.size.bias: 0.000</span><br><span class="line">          touch.size.isSummed: false</span><br><span class="line">          touch.pressure.calibration: amplitude</span><br><span class="line">          touch.pressure.scale: 0.005</span><br><span class="line">          touch.orientation.calibration: none</span><br><span class="line">          touch.distance.calibration: none</span><br><span class="line">        SurfaceWidth: 720px</span><br><span class="line">        SurfaceHeight: 1280px</span><br><span class="line">        SurfaceOrientation: 0</span><br><span class="line">        Translation and Scaling Factors:</span><br><span class="line">          XScale: 0.999</span><br><span class="line">          YScale: 0.999</span><br><span class="line">          XPrecision: 1.001</span><br><span class="line">          YPrecision: 1.001</span><br><span class="line">          GeometricScale: 0.999</span><br><span class="line">          PressureScale: 0.005</span><br><span class="line">          SizeScale: 0.033</span><br><span class="line">          OrientationCenter: 0.000</span><br><span class="line">          OrientationScale: 0.000</span><br><span class="line">          DistanceScale: 0.000</span><br><span class="line">          HaveTilt: false</span><br><span class="line">          TiltXCenter: 0.000</span><br><span class="line">          TiltXScale: 0.000</span><br><span class="line">          TiltYCenter: 0.000</span><br><span class="line">          TiltYScale: 0.000</span><br><span class="line">        Last Button State: 0x00000000</span><br><span class="line">        Last Raw Touch: pointerCount=0</span><br><span class="line">        Last Cooked Touch: pointerCount=0</span><br></pre></td></tr></table></figure>

<p>At the end of the input reader state dump there is some information about global configuration parameters, such as the tap interval.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Configuration:</span><br><span class="line">  ExcludedDeviceNames: []</span><br><span class="line">  VirtualKeyQuietTime: 0.0ms</span><br><span class="line">  PointerVelocityControlParameters: scale=1.000, lowThreshold=500.000, highThreshold=3000.000, acceleration=3.000</span><br><span class="line">  WheelVelocityControlParameters: scale=1.000, lowThreshold=15.000, highThreshold=50.000, acceleration=4.000</span><br><span class="line">  PointerGesture:</span><br><span class="line">    Enabled: true</span><br><span class="line">    QuietInterval: 100.0ms</span><br><span class="line">    DragMinSwitchSpeed: 50.0px/s</span><br><span class="line">    TapInterval: 150.0ms</span><br><span class="line">    TapDragInterval: 300.0ms</span><br><span class="line">    TapSlop: 20.0px</span><br><span class="line">    MultitouchSettleInterval: 100.0ms</span><br><span class="line">    MultitouchMinDistance: 15.0px</span><br><span class="line">    SwipeTransitionAngleCosine: 0.3</span><br><span class="line">    SwipeMaxWidthRatio: 0.2</span><br><span class="line">    MovementSpeedRatio: 0.8</span><br><span class="line">    ZoomSpeedRatio: 0.3</span><br></pre></td></tr></table></figure>

<h3 id="Input-dispatcher-state"><a href="#Input-dispatcher-state" class="headerlink" title="Input dispatcher state"></a>Input dispatcher state</h3><p>The <code>InputDispatcher</code> is responsible for sending input events to applications. As shown in the sample output below, its state dump shows information about which window is being touched, the state of the input queue, whether an ANR is in progress, and so on.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">Input Dispatcher State:</span><br><span class="line">  DispatchEnabled: 1</span><br><span class="line">  DispatchFrozen: 0</span><br><span class="line">  FocusedApplication: &lt;null&gt;</span><br><span class="line">  FocusedWindow: name='Window&#123;3fb06dc3 u0 StatusBar&#125;'</span><br><span class="line">  TouchStates: &lt;no displays touched&gt;</span><br><span class="line">  Windows:</span><br><span class="line">    0: name='Window&#123;357bbbfe u0 SearchPanel&#125;', displayId=0, paused=false, hasFocus=false, hasWallpaper=false, visible=false, canReceiveKeys=false, flags=0x01820100, type=0x000007e8, layer=211000, frame=[0,0][1080,1920], scale=1.000000, touchableRegion=[0,0][1080,1920], inputFeatures=0x00000000, ownerPid=22674, ownerUid=10020, dispatchingTimeout=5000.000ms</span><br><span class="line">    1: name='Window&#123;3b14c0ca u0 NavigationBar&#125;', displayId=0, paused=false, hasFocus=false, hasWallpaper=false, visible=false, canReceiveKeys=false, flags=0x01840068, type=0x000007e3, layer=201000, frame=[0,1776][1080,1920], scale=1.000000, touchableRegion=[0,1776][1080,1920], inputFeatures=0x00000000, ownerPid=22674, ownerUid=10020, dispatchingTimeout=5000.000ms</span><br><span class="line">    2: name='Window&#123;2c7e849c u0 com.vito.lux&#125;', displayId=0, paused=false, hasFocus=false, hasWallpaper=false, visible=true, canReceiveKeys=false, flags=0x0089031a, type=0x000007d6, layer=191000, frame=[-495,-147][1575,1923], scale=1.000000, touchableRegion=[-495,-147][1575,1923], inputFeatures=0x00000000, ownerPid=4697, ownerUid=10084, dispatchingTimeout=5000.000ms</span><br><span class="line">    ...</span><br><span class="line">  MonitoringChannels:</span><br><span class="line">    0: 'WindowManager (server)'</span><br><span class="line">  RecentQueue: length=10</span><br><span class="line">    MotionEvent(deviceId=4, source=0x00001002, action=2, flags=0x00000000, metaState=0x00000000, buttonState=0x00000000, edgeFlags=0x00000000, xPrecision=1.0, yPrecision=1.0, displayId=0, pointers=[0: (335.0, 1465.0)]), policyFlags=0x62000000, age=217264.0ms</span><br><span class="line">    MotionEvent(deviceId=4, source=0x00001002, action=1, flags=0x00000000, metaState=0x00000000, buttonState=0x00000000, edgeFlags=0x00000000, xPrecision=1.0, yPrecision=1.0, displayId=0, pointers=[0: (335.0, 1465.0)]), policyFlags=0x62000000, age=217255.7ms</span><br><span class="line">    MotionEvent(deviceId=4, source=0x00001002, action=0, flags=0x00000000, metaState=0x00000000, buttonState=0x00000000, edgeFlags=0x00000000, xPrecision=1.0, yPrecision=1.0, displayId=0, pointers=[0: (330.0, 1283.0)]), policyFlags=0x62000000, age=216805.0ms</span><br><span class="line">    ...</span><br><span class="line">  PendingEvent: &lt;none&gt;</span><br><span class="line">  InboundQueue: &lt;empty&gt;</span><br><span class="line">  ReplacedKeys: &lt;empty&gt;</span><br><span class="line">  Connections:</span><br><span class="line">    0: channelName='WindowManager (server)', windowName='monitor', status=NORMAL, monitor=true, inputPublisherBlocked=false</span><br><span class="line">      OutboundQueue: &lt;empty&gt;</span><br><span class="line">      WaitQueue: &lt;empty&gt;</span><br><span class="line">    1: channelName='278c1d65 KeyguardScrim (server)', windowName='Window&#123;278c1d65 u0 KeyguardScrim&#125;', status=NORMAL, monitor=false, inputPublisherBlocked=false</span><br><span class="line">      OutboundQueue: &lt;empty&gt;</span><br><span class="line">      WaitQueue: &lt;empty&gt;</span><br><span class="line">    2: channelName='357bbbfe SearchPanel (server)', windowName='Window&#123;357bbbfe u0 SearchPanel&#125;', status=NORMAL, monitor=false, inputPublisherBlocked=false</span><br><span class="line">      OutboundQueue: &lt;empty&gt;</span><br><span class="line">      WaitQueue: &lt;empty&gt;</span><br><span class="line">    ...</span><br><span class="line">  AppSwitch: not pending</span><br><span class="line">    7: channelName='2280455f com.google.android.gm/com.google.android.gm.ConversationListActivityGmail (server)', windowName='Window&#123;2280455f u0 com.google.android.gm/com.google.android.gm.ConversationListActivityGmail&#125;', status=NORMAL, monitor=false, inputPublisherBlocked=false</span><br><span class="line">      OutboundQueue: &lt;empty&gt;</span><br><span class="line">      WaitQueue: &lt;empty&gt;</span><br><span class="line">    8: channelName='1a7be08a com.android.systemui/com.android.systemui.recents.RecentsActivity (server)', windowName='Window&#123;1a7be08a u0 com.android.systemui/com.android.systemui.recents.RecentsActivity EXITING&#125;', status=NORMAL, monitor=false, inputPublisherBlocked=false</span><br><span class="line">      OutboundQueue: &lt;empty&gt;</span><br><span class="line">      WaitQueue: &lt;empty&gt;</span><br><span class="line">    9: channelName='3b14c0ca NavigationBar (server)', windowName='Window&#123;3b14c0ca u0 NavigationBar&#125;', status=NORMAL, monitor=false, inputPublisherBlocked=false</span><br><span class="line">      OutboundQueue: &lt;empty&gt;</span><br><span class="line">      WaitQueue: &lt;empty&gt;</span><br><span class="line">    ...</span><br><span class="line">  Configuration:</span><br><span class="line">    KeyRepeatDelay: 50.0ms</span><br><span class="line">    KeyRepeatTimeout: 500.0ms</span><br></pre></td></tr></table></figure>

<h3 id="Things-to-check-for"><a href="#Things-to-check-for" class="headerlink" title="Things to check for"></a>Things to check for</h3><p>The following is a list of things to cnosider when inspecting the various output for the <code>input</code> service:</p>
<p>Event hub state:</p>
<ul>
<li>All of the input devices you expect are present.</li>
<li>Each input device has an appropriate key layout file, key character map file, and input device configuration file. If the files are missing or contain syntax errors, then they will not be loaded.</li>
<li>Each input device is classified correctly. The bits in the <code>Classes</code> field correspond to flags in <code>EventHub.h</code>, such as <code>INPUT_DEVICE_CLASS_TOUCH_MT</code>.</li>
<li>The <code>BuiltInKeyboardId</code> is correct. If the device does not have a built-in keyboard , then the id must be <code>-2</code>. Otherwise, it should be the id of the built-in keyboard.<ul>
<li>If you observe that the <code>BuiltInKeyboardId</code> is not <code>-2</code> but it should be, then you are missing a key character map file for a special function keypad somwhere. Special function keypad devices should have key character map files that contain just the line <code>type SPECIAL_FUNCTION</code>(that’s what in the <code>tuna-gpio-keykad.kcm</code> file we see mentioned above).</li>
</ul>
</li>
</ul>
<p>Input reader state:</p>
<ul>
<li>All of the expected input devices are present.</li>
<li>Each input device is configured correctly. In particular, check that the touch screen and joystick axes are correct.</li>
</ul>
<p>Input dispatcher state:</p>
<ul>
<li>All input events are processed as expected.</li>
<li>After touching the touch screen and running <code>dumpsys</code> at the same time, the <code>TouchStates</code> line correctly identifies the window that you are touching.</li>
</ul>
<h2 id="Test-UI-performance"><a href="#Test-UI-performance" class="headerlink" title="Test UI performance"></a>Test UI performance</h2><p>Specifying the <code>gfxinfo</code> service provides output with performance information relating to frames of animation that are occurring during the recording phase. The following command uses <code>gfxinfo</code> to gather UI performance data for a specified package name:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys gfxinfo package-name</span><br></pre></td></tr></table></figure>

<p>You can also include the <code>framestats</code> option to provide even more detailed frame timing information from recent frames, so that you can track down and debug problems more accurately, shown below:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys gfxinfo package-name framestats</span><br></pre></td></tr></table></figure>

<p>To learn more about using <code>gfxinfo</code> and <code>framestates</code> to integrate UI performance measurements into your testing practices, go to <a href="https://developer.android.com/training/testing/performance.html" target="_blank" rel="noopener">Testing UI performance</a></p>
<h2 id="Inspect-network-diagnostics"><a href="#Inspect-network-diagnostics" class="headerlink" title="Inspect network diagnostics"></a>Inspect network diagnostics</h2><p>Specifying the <code>netstats</code> service provides network usage statistics collected since the previous device booted up.  To output additional information, such as detailed unique user ID(UID) information, include the <code>detail</code> option, as follows:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys netstats detail</span><br></pre></td></tr></table></figure>

<p>The output varies depending on the version of Android running on the connected device. The sections below describe the type of information you typically see.</p>
<h3 id="Active-interfaces-and-active-UID-interfaces"><a href="#Active-interfaces-and-active-UID-interfaces" class="headerlink" title="Active interfaces and active UID interfaces"></a>Active interfaces and active UID interfaces</h3><p>The following sample output lists the active interfaces and active UID interfaces of the connected device. In most cases, the infomration for active interfaces and active UID interfaces is the same.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Active interfaces:</span><br><span class="line">  iface=wlan0 ident=[&#123;type=WIFI, subType=COMBINED, networkId="Guest"&#125;]</span><br><span class="line">Active UID interfaces:</span><br><span class="line">  iface=wlan0 ident=[&#123;type=WIFI, subType=COMBINED, networkId="Guest"&#125;]</span><br></pre></td></tr></table></figure>

<h3 id="‘Dev’-and-‘Xt’-statistics"><a href="#‘Dev’-and-‘Xt’-statistics" class="headerlink" title="‘Dev’ and ‘Xt’ statistics"></a>‘Dev’ and ‘Xt’ statistics</h3><p>The following is a sample output for the Dev statistics section:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Dev stats:</span><br><span class="line">  Pending bytes: 1798112</span><br><span class="line">  History since boot:</span><br><span class="line">  ident=[&#123;type=WIFI, subType=COMBINED, networkId="Guest", metered=false&#125;] uid=-1 set=ALL tag=0x0</span><br><span class="line">    NetworkStatsHistory: bucketDuration=3600</span><br><span class="line">      st=1497891600 rb=1220280 rp=1573 tb=309870 tp=1271 op=0</span><br><span class="line">      st=1497895200 rb=29733 rp=145 tb=85354 tp=185 op=0</span><br><span class="line">      st=1497898800 rb=46784 rp=162 tb=42531 tp=192 op=0</span><br><span class="line">      st=1497902400 rb=27570 rp=111 tb=35990 tp=121 op=0</span><br><span class="line">Xt stats:</span><br><span class="line">  Pending bytes: 1771782</span><br><span class="line">  History since boot:</span><br><span class="line">  ident=[&#123;type=WIFI, subType=COMBINED, networkId="Guest", metered=false&#125;] uid=-1 set=ALL tag=0x0</span><br><span class="line">    NetworkStatsHistory: bucketDuration=3600</span><br><span class="line">      st=1497891600 rb=1219598 rp=1557 tb=291628 tp=1255 op=0</span><br><span class="line">      st=1497895200 rb=29623 rp=142 tb=82699 tp=182 op=0</span><br><span class="line">      st=1497898800 rb=46684 rp=160 tb=39756 tp=191 op=0</span><br><span class="line">      st=1497902400 rb=27528 rp=110 tb=34266 tp=120 op=0</span><br></pre></td></tr></table></figure>

<h3 id="UID-stats"><a href="#UID-stats" class="headerlink" title="UID stats"></a>UID stats</h3><p>The following is a sample of detailed statistics of each UID.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">UID stats:</span><br><span class="line">  Pending bytes: 744</span><br><span class="line">  Complete history:</span><br><span class="line">  ident=[[type=MOBILE_SUPL, subType=COMBINED, subscriberId=311111...], [type=MOBILE, subType=COMBINED, subscriberId=311111...]] uid=10007  set=DEFAULT tag=0x0</span><br><span class="line">    NetworkStatsHistory: bucketDuration=7200000</span><br><span class="line">      bucketStart=1406167200000 activeTime=7200000 rxBytes=4666 rxPackets=7 txBytes=1597 txPackets=10 operations=0</span><br><span class="line">  ident=[[type=WIFI, subType=COMBINED, networkId="MySSID"]] uid=10007  set=DEFAULT tag=0x0</span><br><span class="line">    NetworkStatsHistory: bucketDuration=7200000</span><br><span class="line">      bucketStart=1406138400000 activeTime=7200000 rxBytes=17086802 rxPackets=15387 txBytes=1214969 txPackets=8036 operations=28</span><br><span class="line">      bucketStart=1406145600000 activeTime=7200000 rxBytes=2396424 rxPackets=2946 txBytes=464372 txPackets=2609 operations=70</span><br><span class="line">      bucketStart=1406152800000 activeTime=7200000 rxBytes=200907 rxPackets=606 txBytes=187418 txPackets=739 operations=0</span><br><span class="line">      bucketStart=1406160000000 activeTime=7200000 rxBytes=826017 rxPackets=1126 txBytes=267342 txPackets=1175 operations=35</span><br></pre></td></tr></table></figure>

<p>To find the UID for your app, run this command : <code>adb shell dumpsys package your-package-name</code>. Then look for the line labeled <code>userId</code>.</p>
<p>For example, to find network usage for the app ‘com.example.myapp’, run the following command:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys package com.example.myapp | grep userId</span><br></pre></td></tr></table></figure>

<p>the output should be similar to the following:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userid = 10007 gids = [3003, 1028, 1015]</span><br></pre></td></tr></table></figure>

<p>Using the sample dump above, look for the lines that have <code>uid = 10007</code>. Two such lines exist-the first indicates a mobile connection and the second indicates a Wi-Fi connection. Below each line, you can see the following information for each two-hour window(which <code>bucketDuration</code> specifies in milliseconds):</p>
<ul>
<li><code>set=DEFAULT</code> indicates foreground network usage, while <code>set=BACKGROUND</code> indicates background usage. <code>set=ALL</code> implies both</li>
<li><code>tag=0x0</code> indicates the socket tag associated with the traffic. </li>
<li><code>rxBytes</code> and <code>rxPackets</code> represent received bytes and received packets in the corresponding time interval.</li>
<li><code>txBytes</code> and <code>txPackets</code> represent sent(transmitted) bytes and sent packets in the corresponding time interval.</li>
</ul>
<h2 id="Inspect-battery-diagnostics"><a href="#Inspect-battery-diagnostics" class="headerlink" title="Inspect battery diagnostics"></a>Inspect battery diagnostics</h2><p>Specifying the <code>batterystats</code> service generates interesting statistical data about battery usage on a device, organized by unique user ID(UID). To learn how to use <code>dumpsys</code> to test your app for Doze and App Standby, go to <a href="https://developer.android.com/training/monitoring-device-state/doze-standby.html#testing_doze_and_app_standby" target="_blank" rel="noopener">Testing with Doze and App Standby</a>.</p>
<p>The command for <code>batterystats</code> is as follows:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys batterystats options</span><br></pre></td></tr></table></figure>

<p>To see a list of additional options available to <code>batterystats</code>, include the <code>-h</code> option. The example below outputs battery usage statistics for a specified app package since the device was last charged:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys batterystats --charged package-name</span><br></pre></td></tr></table></figure>

<p>The output typically includes the following:</p>
<ul>
<li>History of battery-related events</li>
<li>Global statistics for the device</li>
<li>Approximate power use per UID and system component</li>
<li>Per-app mobile milliseconds per packet</li>
<li>System UID aggregated statistics</li>
<li>App UID aggregated statistics</li>
</ul>
<p>To learn more about using <code>batterystats</code> and generating an HTML visualization of the output, which makes it easier to understand and diagnose battery-related issues, read <a href="https://developer.android.com/studio/profile/battery-historian.html" target="_blank" rel="noopener">Profile battery usage with Batterystats and Battery Historian</a>.</p>
<h3 id="Inspecting-machine-friendly-output"><a href="#Inspecting-machine-friendly-output" class="headerlink" title="Inspecting machine-friendly output"></a>Inspecting machine-friendly output</h3><p>You can generate <code>batterystats</code> output in machine-readable CSV format by using the following command:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys batterystats --checkin</span><br></pre></td></tr></table></figure>

<p>The following is an example of the output you should see:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">9,0,i,vers,11,116,K,L</span><br><span class="line">9,0,i,uid,1000,android</span><br><span class="line">9,0,i,uid,1000,com.android.providers.settings</span><br><span class="line">9,0,i,uid,1000,com.android.inputdevices</span><br><span class="line">9,0,i,uid,1000,com.android.server.telecom</span><br><span class="line">...</span><br><span class="line">9,0,i,dsd,1820451,97,s-,p-</span><br><span class="line">9,0,i,dsd,3517481,98,s-,p-</span><br><span class="line">9,0,l,bt,0,8548446,1000983,8566645,1019182,1418672206045,8541652,994188</span><br><span class="line">9,0,l,gn,0,0,666932,495312,0,0,2104,1444</span><br><span class="line">9,0,l,m,6794,0,8548446,8548446,0,0,0,666932,495312,0,697728,0,0,0,5797,0,0</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>Battery-usage observations may be per-UID or system-level; data is selected for inclusion based on its usefulness in analyzing battery performance. Each row represents an observation with the following elements:</p>
<ul>
<li>A dummy integer</li>
<li>The user ID associated with the observation</li>
<li>The aggregation mode:<ul>
<li>“i” for information not tied to charged/uncharged status.</li>
<li>“I” for –charged(usage since last charge).</li>
<li>“u” for –unplugged(usage since last unplugged). Deprecated in Android 5.1.1</li>
</ul>
</li>
<li>Section identifier, which determines how to interpret subsequent values in the line</li>
</ul>
<p>The table below describes the various section identifiers you may see:<br>// TODO </p>
<h2 id="View-memory-allocations"><a href="#View-memory-allocations" class="headerlink" title="View memory allocations"></a>View memory allocations</h2><p>You can inspect your app’s memory usage in one of two ways: over a period of time using <code>procstats</code> or at a particular snapshot in time using <code>meminfo</code>. The sections below show you how to use either method.</p>
<h3 id="procstats"><a href="#procstats" class="headerlink" title="procstats"></a>procstats</h3><p><code>procstats</code> makes it possible to see how your app is behaving over time-including how long it runs in the background and how much memory it uses during that time. It helps you quickly find inefficiencies and misbehaviors in your app, such as memory leaks, that can affect how it performs , especially when running on low-memory devices. Its state dump displays statistics about every application’s runtime, proportional set size(PSS) and unique set size(USS).</p>
<p>To get application memory usage stats over the last three hours, in human-readable format, run the following command:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys procstats --hours 3</span><br></pre></td></tr></table></figure>

<p>As can be seen in the example below, the output displays what percentage of time the application was running , and the PSS and USS as <code>minPSS-avgPSS-maxPSS/minUSS-avgUSS-maxUSS</code> over the number of samples.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">AGGREGATED OVER LAST 3 HOURS:</span><br><span class="line">  * com.android.systemui / u0a20 / v22:</span><br><span class="line">           TOTAL: 100% (109MB-126MB-159MB/108MB-125MB-157MB over 18)</span><br><span class="line">      Persistent: 100% (109MB-126MB-159MB/108MB-125MB-157MB over 18)</span><br><span class="line">  * com.android.nfc / 1027 / v22:</span><br><span class="line">           TOTAL: 100% (17MB-17MB-17MB/16MB-16MB-16MB over 18)</span><br><span class="line">      Persistent: 100% (17MB-17MB-17MB/16MB-16MB-16MB over 18)</span><br><span class="line">  * android.process.acore / u0a4 / v22:</span><br><span class="line">           TOTAL: 100% (14MB-15MB-15MB/14MB-14MB-14MB over 20)</span><br><span class="line">          Imp Fg: 100% (14MB-15MB-15MB/14MB-14MB-14MB over 20)</span><br><span class="line">  ...</span><br><span class="line">  * com.coulombtech / u0a106 / v26:</span><br><span class="line">           TOTAL: 0.01%</span><br><span class="line">        Receiver: 0.01%</span><br><span class="line">        (Cached): 21% (4.9MB-5.0MB-5.2MB/3.8MB-3.9MB-4.1MB over 2)</span><br><span class="line">  * com.softcoil.mms / u0a86 / v32:</span><br><span class="line">           TOTAL: 0.01%</span><br><span class="line">        (Cached): 0.25%</span><br><span class="line">  * com.udemy.android / u0a91 / v38:</span><br><span class="line">           TOTAL: 0.01%</span><br><span class="line">        Receiver: 0.01%</span><br><span class="line">        (Cached): 0.75% (9.8MB-9.8MB-9.8MB/8.5MB-8.5MB-8.5MB over 1)</span><br><span class="line">  ...</span><br><span class="line">Run time Stats:</span><br><span class="line">  SOff/Norm: +32m52s226ms</span><br><span class="line">  SOn /Norm: +2h10m8s364ms</span><br><span class="line">       Mod : +17s930ms</span><br><span class="line">      TOTAL: +2h43m18s520ms</span><br><span class="line"></span><br><span class="line">Memory usage:</span><br><span class="line">  Kernel : 265MB (38 samples)</span><br><span class="line">  Native : 73MB (38 samples)</span><br><span class="line">  Persist: 262MB (90 samples)</span><br><span class="line">  Top    : 190MB (325 samples)</span><br><span class="line">  ImpFg  : 204MB (569 samples)</span><br><span class="line">  ImpBg  : 754KB (345 samples)</span><br><span class="line">  Service: 93MB (1912 samples)</span><br><span class="line">  Receivr: 227KB (1169 samples)</span><br><span class="line">  Home   : 66MB (12 samples)</span><br><span class="line">  LastAct: 30MB (255 samples)</span><br><span class="line">  CchAct : 220MB (450 samples)</span><br><span class="line">  CchCAct: 193MB (71 samples)</span><br><span class="line">  CchEmty: 182MB (652 samples)</span><br><span class="line">  Cached : 58MB (38 samples)</span><br><span class="line">  Free   : 60MB (38 samples)</span><br><span class="line">  TOTAL  : 1.9GB</span><br><span class="line">  ServRst: 50KB (278 samples)</span><br><span class="line"></span><br><span class="line">          Start time: 2015-04-08 13:44:18</span><br><span class="line">  Total elapsed time: +2h43m18s521ms (partial) libart.so</span><br></pre></td></tr></table></figure>

<h3 id="meminfo"><a href="#meminfo" class="headerlink" title="meminfo"></a>meminfo</h3><p>You can record a snapshot of how your app’s memory is divided between different types of RAM allocation with the following command:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys meminfo package_name|pid [-d]</span><br></pre></td></tr></table></figure>

<p>The -d flag prints more info related to Dalvik and ART memory usage.<br>The output lists all of your app’s current allocations, measured in kilobytes.<br>When inspecting this information, you should be familiar with the following types of allocation:</p>
<ul>
<li>Private(Clean and Dirty) RAM<br>  This is memory that is being used by only your process. This is the bulk of the RAM that the system can reclaim when your app’s process is destroyed. Generally, the most important portion of this is private dirty RAM, which is the most expensive because it is used by only your process and its contents exist only in RAM so can’t be paged to storage(beacuse Android does not use swap). All Dalvik and native heap allocations your make will be private dirty RAM; Dalvik and native allocations you share with the Zygote process are shared dirty RAM.</li>
<li>Proportional Set Size (PSS)<br>  This is a measurement of your app’s RAM use that takes into account sharing pages across processes. Any RAM pages that are unique to your process directly contribute to its PSS value, while pages that are shared with other processes contribute to the PSS value only in proportion to the amount of sharing. For example, a page that is shared between two processes will contribute half of its size to the PSS of each process.</li>
</ul>
<p>A nice characteristic of the PSS measurement is that you can add up the PSS across all processes to determine the actual memory being used by all processes. This means PSS is a good measure for the actual RAM weight of a process and for comparison against the RAM use of other processes and the total available RAm.</p>
<p>For example, below is the output for Map’s process on a Nexus 5 device. There is a lot of information here, but key points for discussion are listed below.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys meminfo com.google.android.apps.maps -d</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">** MEMINFO in pid 18227 [com.google.android.apps.maps] **</span><br><span class="line">                   Pss  Private  Private  Swapped     Heap     Heap     Heap</span><br><span class="line">                 Total    Dirty    Clean    Dirty     Size    Alloc     Free</span><br><span class="line">                ------   ------   ------   ------   ------   ------   ------</span><br><span class="line">  Native Heap    10468    10408        0        0    20480    14462     6017</span><br><span class="line">  Dalvik Heap    34340    33816        0        0    62436    53883     8553</span><br><span class="line"> Dalvik Other      972      972        0        0</span><br><span class="line">        Stack     1144     1144        0        0</span><br><span class="line">      Gfx dev    35300    35300        0        0</span><br><span class="line">    Other dev        5        0        4        0</span><br><span class="line">     .so mmap     1943      504      188        0</span><br><span class="line">    .apk mmap      598        0      136        0</span><br><span class="line">    .ttf mmap      134        0       68        0</span><br><span class="line">    .dex mmap     3908        0     3904        0</span><br><span class="line">    .oat mmap     1344        0       56        0</span><br><span class="line">    .art mmap     2037     1784       28        0</span><br><span class="line">   Other mmap       30        4        0        0</span><br><span class="line">   EGL mtrack    73072    73072        0        0</span><br><span class="line">    GL mtrack    51044    51044        0        0</span><br><span class="line">      Unknown      185      184        0        0</span><br><span class="line">        TOTAL   216524   208232     4384        0    82916    68345    14570</span><br><span class="line"></span><br><span class="line"> Dalvik Details</span><br><span class="line">        .Heap     6568     6568        0        0</span><br><span class="line">         .LOS    24771    24404        0        0</span><br><span class="line">          .GC      500      500        0        0</span><br><span class="line">    .JITCache      428      428        0        0</span><br><span class="line">      .Zygote     1093      936        0        0</span><br><span class="line">   .NonMoving     1908     1908        0        0</span><br><span class="line"> .IndirectRef       44       44        0        0</span><br><span class="line"></span><br><span class="line"> Objects</span><br><span class="line">               Views:       90         ViewRootImpl:        1</span><br><span class="line">         AppContexts:        4           Activities:        1</span><br><span class="line">              Assets:        2        AssetManagers:        2</span><br><span class="line">       Local Binders:       21        Proxy Binders:       28</span><br><span class="line">       Parcel memory:       18         Parcel count:       74</span><br><span class="line">    Death Recipients:        2      OpenSSL Sockets:        2</span><br></pre></td></tr></table></figure>

<p>Here is an older dumpsys on Dalvik of the gmail app:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">** MEMINFO in pid 9953 [com.google.android.gm] **</span><br><span class="line">                 Pss     Pss  Shared Private  Shared Private    Heap    Heap    Heap</span><br><span class="line">               Total   Clean   Dirty   Dirty   Clean   Clean    Size   Alloc    Free</span><br><span class="line">              ------  ------  ------  ------  ------  ------  ------  ------  ------</span><br><span class="line">  Native Heap      0       0       0       0       0       0    7800    7637(6)  126</span><br><span class="line">  Dalvik Heap   5110(3)    0    4136    4988(3)    0       0    9168    8958(6)  210</span><br><span class="line"> Dalvik Other   2850       0    2684    2772       0       0</span><br><span class="line">        Stack     36       0       8      36       0       0</span><br><span class="line">       Cursor    136       0       0     136       0       0</span><br><span class="line">       Ashmem     12       0      28       0       0       0</span><br><span class="line">    Other dev    380       0      24     376       0       4</span><br><span class="line">     .so mmap   5443(5) 1996    2584    2664(5) 5788    1996(5)</span><br><span class="line">    .apk mmap    235      32       0       0    1252      32</span><br><span class="line">    .ttf mmap     36      12       0       0      88      12</span><br><span class="line">    .dex mmap   3019(5) 2148       0       0    8936    2148(5)</span><br><span class="line">   Other mmap    107       0       8       8     324      68</span><br><span class="line">      Unknown   6994(4)    0     252    6992(4)    0       0</span><br><span class="line">        TOTAL  24358(1) 4188    9724   17972(2)16388    4260(2)16968   16595     336</span><br><span class="line"></span><br><span class="line"> Objects</span><br><span class="line">               Views:    426         ViewRootImpl:        3(8)</span><br><span class="line">         AppContexts:      6(7)        Activities:        2(7)</span><br><span class="line">              Assets:      2        AssetManagers:        2</span><br><span class="line">       Local Binders:     64        Proxy Binders:       34</span><br><span class="line">    Death Recipients:      0</span><br><span class="line">     OpenSSL Sockets:      1</span><br><span class="line"></span><br><span class="line"> SQL</span><br><span class="line">         MEMORY_USED:   1739</span><br><span class="line">  PAGECACHE_OVERFLOW:   1164          MALLOC_SIZE:       62</span><br></pre></td></tr></table></figure>

<p>In general, be concerned with only the <code>Pss Total</code> and <code>Private Dirty</code> columns. In some cases, the <code>Private Clean</code> and <code>Heap Alloc</code> columns also offer interesting data. More information about the different memory allocations(the rows) you should observe follows:</p>
<p><code>Dalvik Heap</code><br>    The RAM used by Dalvik allocations in your app. The <code>Pss Total</code> includes all Zygote allocations(weighted by their sharing across processes, as described in the PSS definition above). The <code>Private Dirty</code> number is the actual RAM committed to only your app’s heap, composed of your own allocations and any Zygote allocation pages that have been modified since forking your app’s process from Zygote.<br>    The <code>Heap Alloc</code> is the amount of memory that the Dalvik and native heap allocators keep track of for your app. This value is larger thatn <code>Pss Total</code> and <code>Private Dirty</code> because your process was forked from Zygote and it includes allocations that your process shares with all the others.</p>
<p><code>.so mmap</code> and <code>.dex mmap</code><br>    The RAM being used for mapped <code>.so</code>(native) and <code>.dex</code> (Dalvik or ART) code. The <code>Pss Total</code> number includes platform code shared across apps; t he <code>Private Clean</code> is your app’s own code. Generally, the actual mapped size will be much larger-the RAM here is only what currently needs to be in RAM for code  that has been executed by the app. However, the .so mmap has a large private dirty, which is due to fix-ups to the native code when it was loaded into its final address.</p>
<p><code>.oat mmap</code><br>    This is the amount of RAM used by the code image which is based off of the preloaded classes which are commonly used by multiple apps. This image is shared across all apps and is unaffected by particular apps.</p>
<p><code>.art mmap</code><br>    This is the amount of RAM used buy the heap image which is based off of the preloaded class which are commonly used by multiple apps. this image is shared across all apps and is unaffected by particular apps. Even though the ART image contains <code>Object</code> instances, it does not count towards your heap size.</p>
<p><code>.Heap</code>(only with -d flag)<br>    This is the amount of heap memory for your app. This excludes objects in the image and large object spaces, but includes the zygote space and non-moving space.</p>
<p><code>.LOS</code>(only with -d flag)<br>    This is the amount of RAM used by the ART large object space. This includes zygote large objects. Large objects are all primitive array allocations larger than 12KB.</p>
<p><code>.GC</code> (only with -d flag)<br>    This is the overhead cost for garbage collection. There is not really any way to reduce this overhead.</p>
<p><code>.JITCache</code> (only with -d flag)<br>    This is the amount of memory used by the JIT data and code caches. Typically, this is zero since all of the apps will be compiled at installed time.</p>
<p><code>.Zygote</code> (only with -d flag)<br>    This is the amount of memory used by the zygote space. The zygote space is created during device startup and is never allocated into.</p>
<p><code>.NonMoving</code> (only with -d flag)<br>    This is the amount of RAM used by the ART non-moving space. The non-moving space contains special non-movable objects such as fields and methods . You can reduce this section by using fewer fields and methods in your app.</p>
<p><code>.IndirectRef</code> (only with -d flag)<br>    This is the amount of RAM used by the ART indirect reference tables. Usually this amount is small, but if it is too high, it might be possible to reduce it by reducing the number of local and global JNI references used. </p>
<p><code>Unknown</code><br>    Any RAM pages that the system could not classify into one of the other more specific items. Currently, this contains mostly native allocations, which cannot be identified by the tool when collecting this data due to Address Space Layout Randomization (ASLR). Like the Dalvik heap, the <code>Pss Total</code> for Unknown takes into account sharing with Zygote, and <code>Private Dirty</code> is unknown RAM dedicated to only your app.</p>
<p><code>TOTAL</code><br>    The total Proportional Set Size (PSS) RAM used by your process. This is the sum of all PSS fields above it. It indicates the overall memory weight of your process, which can be directly compared with other processes and the total available RAM.<br>    The <code>Private Dirty</code> and <code>Private Clean</code> are the total allocations within your process, which are not shared with other processes. Together (especially <code>Private Dirty</code>), this is the amount of RAM that will be released back to the system when your process is destroyed. Dirty RAM is pages that have been modified and so must stay committed to RAM (because there is no swap); clean RAM is pages that have been mapped from a persistent file (such as code being executed) and so can be paged out if not used for a while.</p>
<p><code>ViewRootImp</code><br>    The number of root views that are active in your process. Each root view is associated with a window, so this can help you identify memory leaks involving dialogs or other windows.</p>
<p><code>AppContext</code> and <code>Activities</code><br>    The number of app Context and Activity objects that currently live in your process. This can help you to quickly identify leaked Activity objects that can’t be garbage collected due to static references on them, which is common. These objects often have many other allocations associated with them, which makes them a good way to track large memory leaks.</p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>您的支持将鼓励我继续创作！</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>Donate</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechat.jpg" alt="ScorpioNeal WeChat Pay">
        <p>WeChat Pay</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="ScorpioNeal Alipay">
        <p>Alipay</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/AndroidOptimization/" rel="tag"># AndroidOptimization</a>
          
            <a href="/tags/AndroidTranslation/" rel="tag"># AndroidTranslation</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/posts/34ef83a0/" rel="next" title="Android-Fragment懒加载">
                <i class="fa fa-chevron-left"></i> Android-Fragment懒加载
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/posts/21792e63/" rel="prev" title="Java-《Java编程的逻辑》读书笔记">
                Java-《Java编程的逻辑》读书笔记 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">ScorpioNeal</p>
              <p class="site-description motion-element" itemprop="description">体系(点 - 线 - 面)</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">159</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#dumpsys工具"><span class="nav-number">1.</span> <span class="nav-text">dumpsys工具</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Syntax"><span class="nav-number">1.1.</span> <span class="nav-text">Syntax</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Command-line-options"><span class="nav-number">1.1.1.</span> <span class="nav-text">Command line options</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Inspect-input-diagnostics"><span class="nav-number">1.2.</span> <span class="nav-text">Inspect input diagnostics</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Event-hub-state"><span class="nav-number">1.2.1.</span> <span class="nav-text">Event hub state</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Input-reader-state"><span class="nav-number">1.2.2.</span> <span class="nav-text">Input reader state</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Input-dispatcher-state"><span class="nav-number">1.2.3.</span> <span class="nav-text">Input dispatcher state</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Things-to-check-for"><span class="nav-number">1.2.4.</span> <span class="nav-text">Things to check for</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Test-UI-performance"><span class="nav-number">1.3.</span> <span class="nav-text">Test UI performance</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Inspect-network-diagnostics"><span class="nav-number">1.4.</span> <span class="nav-text">Inspect network diagnostics</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Active-interfaces-and-active-UID-interfaces"><span class="nav-number">1.4.1.</span> <span class="nav-text">Active interfaces and active UID interfaces</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#‘Dev’-and-‘Xt’-statistics"><span class="nav-number">1.4.2.</span> <span class="nav-text">‘Dev’ and ‘Xt’ statistics</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UID-stats"><span class="nav-number">1.4.3.</span> <span class="nav-text">UID stats</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Inspect-battery-diagnostics"><span class="nav-number">1.5.</span> <span class="nav-text">Inspect battery diagnostics</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Inspecting-machine-friendly-output"><span class="nav-number">1.5.1.</span> <span class="nav-text">Inspecting machine-friendly output</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#View-memory-allocations"><span class="nav-number">1.6.</span> <span class="nav-text">View memory allocations</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#procstats"><span class="nav-number">1.6.1.</span> <span class="nav-text">procstats</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#meminfo"><span class="nav-number">1.6.2.</span> <span class="nav-text">meminfo</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ScorpioNeal</span>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>



        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'Bp6gNEmnfgAF2Ci7moO9v4Rm-gzGzoHsz',
        appKey: 'xNstrbz0DRkVzIMvuDNrkAOh',
        placeholder: '要不要说点啥',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

  <script type="text/javascript" src="/js/src/dynamic_bg.js"></script>
  <script type="text/javascript" src="/js/src/love-click.js"></script>
</body>
</html>
